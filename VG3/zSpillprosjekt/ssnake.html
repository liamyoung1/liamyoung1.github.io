<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snake</title>
</head>
<body>
    <canvas id="canvas" width="400" height="300"></canvas>


    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        const box = 32;

        // her legger jeg inn bildene mine, eple og bakgrunnen
        const gress = new Image();
        gress.src = "gress.jpg";

        const eple = new Image();
        eple.src = "eple.png";

        let snake = [];
        snake[0] = {
            x: 9 * box,
            y: 10 * box
        }
        let mat = {
            x: Math.floor(Math.random()*17+1) * box,
            y: Math.floor(Math.random()*15+3) * box
        }

        let score = 0;

        let d;

        document.addEventListener("keydown",direction);
        function direction(event) {
            if(event.keyCode == 37 && d != "RIGHT"){
                d = "LEFT";
            }
            else if(event.keyCode == 38 && d != "DOWN"){
                d = "UP";
            }
            else if(event.keyCode == 39 && d != "LEFT"){
                d = "RIGHT";
            }
            else if(event.keyCode == 40 && d != "UP"){
                d = "DOWN";
            }
        }

        function draw() {
            ctx.drawImage(gress,0,0);
            for ( let i = 0; i < snake.length ; i++){
                ctx.fillStyle = ( i == 0)? "green" : "white";
                ctx.fillRect(snake[i].x,snake[i].y,box,box);

                ctx.strokeStyle = "red";
                ctx.fillRect(snake[i].x,snake[i].y,box,box);
            }
            ctx.drawImage(eple, mat.x, mat.y);

            let snakeX =snake[0].x;
            let snakeY =snake[0].y;


            if(d = "LEFT") snakeX -= box;
            if(d = "UP") snakeY -= box;
            if(d = "RIGHT") snakeX += box;
            if(d = "DOWN") snakeY += box;

            if(snakeX == mat.x && snakeY == mat.y){
                score++;
                mat = {
                    x: Math.floor(Math.random()*17+1) * box,
                    y: Math.floor(Math.random()*15+3) * box
                }
            } else{
                snake.pop();
            }

            let nyttHode = {
                x: snakeX,
                y: snakeY
            };
            snake.unshift(nyttHode);

            ctx.fillStyle = "white";
            ctx.font = "45px Changa one";
            ctx.fillText(score,2*box,1.6*box);
        }
        let game = setInterval(draw,100);

    </script>
</body>
</html>